import{J as c}from"./index-c247efdd.js";const o={namespaced:!0,state:()=>({articlePage:{docs:[],totalDocs:0,limit:10,hasPrevPage:!1,hasNextPage:!1,page:void 0,totalPages:0,offset:0,prevPage:void 0,nextPage:void 0,pagingCounter:0}}),getters:{getArticle:t=>a=>t.articlePage.docs.find(e=>e._id===a),articlePage:t=>t.articlePage},mutations:{ADD_ARTICLE:(t,a)=>{let e=-1;t.articlePage.docs.map((r,s)=>{r._id===a._id&&(e=s)}),e===-1?t.articlePage.docs.push(a):t.articlePage.docs[e]=a},SET_ARTICLE_PAGE:(t,a)=>{t.articlePage=a},REMOVE_ARTICLE(t,a){let e=-1;t.articlePage.docs.map((r,s)=>{r._id===a._id&&(e=s)}),e>-1&&t.articlePage.docs.splice(e,1)}},actions:{async fetchArticle(t,a=""){return await c.get(`/v1/article${a}`).then(e=>(t.commit("ADD_ARTICLE",e.data),e.data)).catch(e=>{var r,s,i;t.dispatch("setToast",{title:"Request failed!",type:"error",text:(i=(s=(r=e.response)==null?void 0:r.data)==null?void 0:s.error)==null?void 0:i.message},{root:!0})})},async fetchArticleList(t,a=""){return await c.get(`/v1/article${a}`).then(e=>(t.commit("SET_ARTICLE_PAGE",e.data),e.data)).catch(e=>{var r,s,i;t.dispatch("setToast",{title:"Request failed!",type:"error",text:(i=(s=(r=e.response)==null?void 0:r.data)==null?void 0:s.error)==null?void 0:i.message},{root:!0})})},async createArticle(t,a){return await c.post("/v1/article",a).then(e=>(t.commit("ADD_ARTICLE",e.data),t.dispatch("setToast",{title:"Success",type:"success",text:"Article created"},{root:!0}),e.data)).catch(e=>{var r,s,i;t.dispatch("setToast",{title:"Request failed!",type:"error",text:(i=(s=(r=e.response)==null?void 0:r.data)==null?void 0:s.error)==null?void 0:i.message},{root:!0})})},updateArticle(t,a){c.put("/v1/article",a).then(e=>{t.commit("ADD_ARTICLE",e.data),t.dispatch("setToast",{title:"Success",type:"success",text:"Article updated"},{root:!0})}).catch(e=>{var r,s,i;t.dispatch("setToast",{title:"Request failed!",type:"error",text:(i=(s=(r=e.response)==null?void 0:r.data)==null?void 0:s.error)==null?void 0:i.message},{root:!0})})},deleteArticle(t,a){c.delete(`/v1/article${a}`).then(e=>{t.commit("REMOVE_ARTICLE",e.data),t.dispatch("setToast",{title:"Success",type:"success",text:"Article deleted"},{root:!0})}).catch(e=>{var r,s,i;t.dispatch("setToast",{title:"Request failed!",type:"error",text:(i=(s=(r=e.response)==null?void 0:r.data)==null?void 0:s.error)==null?void 0:i.message},{root:!0})})}}},l=o;export{l as a};
